<ion-header>
  <ion-toolbar>
    <ion-title>Buscar</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-searchbar
      [(ngModel)]="searchQuery"
      (ionInput)="onSearch()"
      placeholder="Buscar producto, marca..."
      debounce="400"
      animated
    ></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Canasta basica cuando no hay busqueda -->
  <div *ngIf="!hasSearched" class="basket-section">
    <div class="section-header">
      <h3>Canasta basica</h3>
      <p class="subtitle">Los 50 productos mas comprados</p>
    </div>

    <div class="product-grid">
      <app-product-card
        *ngFor="let product of basketProducts"
        [product]="product"
        [compact]="true"
      ></app-product-card>
    </div>

    <!-- Loading skeleton -->
    <div *ngIf="basketProducts.length === 0" class="skeleton-list">
      <div class="skeleton-card" *ngFor="let i of [1,2,3,4,5]">
        <div class="skeleton-image preci-skeleton"></div>
        <div class="skeleton-text">
          <div class="preci-skeleton" style="width: 60%; height: 14px;"></div>
          <div class="preci-skeleton" style="width: 40%; height: 12px; margin-top: 6px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Resultados de busqueda -->
  <div *ngIf="hasSearched && results.length > 0" class="results-section">
    <app-product-card
      *ngFor="let product of results"
      [product]="product"
    ></app-product-card>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="ion-padding ion-text-center">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
  </div>

  <!-- Empty state -->
  <app-empty-state
    *ngIf="hasSearched && results.length === 0 && !isLoading"
    preset="search"
  ></app-empty-state>
</ion-content>
